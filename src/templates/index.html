<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Scrabble Board Builder</title>
    <link rel="stylesheet" href="/static/css/style.css" />
  </head>
  <body>
    <div class="container">
      <div class="row-gap" style="justify-content: space-between;">
        <h1 style="margin: 0;">Scrabble Board Builder</h1>
        <div class="row-gap">
          <a href="/build" style="text-decoration:none; font-weight:700;">Build board</a>
          <a href="/label" style="text-decoration:none;">Label and train</a>
          <a href="/play" style="text-decoration:none;">Play</a>
        </div>
      </div>
      <form id="upload-form" class="section">
        <label class="block">Upload board image</label>
        <input type="file" id="image-input" name="image" accept="image/*" required />
        <div class="row-gap">
          <button type="submit">Upload & Suggest Corners</button>
          <span id="status"></span>
        </div>
      </form>

      <section class="section">
        <h2>1) Source (drag corners)</h2>
        <canvas id="src-canvas"></canvas>
        <div class="row-gap">
          <button id="warp-btn" disabled>Warp with Selected Corners</button>
        </div>
      </section>

      <section class="section">
        <h2>2) Warped Grid Overlay</h2>
        <img id="grid-img" alt="Grid Overlay" />
        <div class="row-gap">
          <label>OCR Engine:</label>
          <select id="ocr-engine">
            <option value="tesseract" selected>Tesseract</option>
            <option value="cnn">CNN Model</option>
          </select>
          <label>Inner margin:</label>
          <input id="inner-margin" type="number" step="0.01" min="0" max="0.45" value="0.18" />
          <label>Outer margin:</label>
          <input id="outer-margin" type="number" step="0.01" min="0" max="0.2" value="0" />
          <label>Min confidence:</label>
          <input id="min-conf" type="number" step="1" min="0" max="100" value="75" />
          <label>PSM:</label>
          <select id="psm">
            <option value="10" selected>10 (single char)</option>
            <option value="8">8 (single word)</option>
            <option value="7">7 (single line)</option>
          </select>
          <label>Binarize</label>
          <input id="binarize" type="checkbox" />
          <label>Isolate main blob</label>
          <input id="isolate-main" type="checkbox" />
          <button id="extract-btn" disabled>Extract Board from Warp</button>
        </div>
      </section>

      <section class="section">
        <h2>3) Last OCR Attempt</h2>
        <div class="row-gap">
          <div>
            <div class="label">Cell image</div>
            <img id="preview-img" alt="Last cell" />
          </div>
          <div>
            <div class="label">Recognized</div>
            <div id="preview-char" class="preview-char"></div>
          </div>
        </div>
      </section>

      <section class="section">
        <h2>4) Extracted Board (15Ã—15)</h2>
        <table id="board-table" class="board-table"></table>
      </section>
    </div>
    <script src="/static/js/app.js"></script>
  </body>
  </html>
